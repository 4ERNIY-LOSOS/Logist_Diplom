# Поэтапный план разработки дипломного проекта
## "Клиент-серверная информационная система управления логистикой"

Этот документ описывает пошаговую стратегию реализации проекта в соответствии с `tz.txt` (версия 2.0). План построен по принципу итеративной разработки, от минимально жизнеспособного продукта (MVP) к полнофункциональной системе.

---

### **Фаза 0: Подготовка и Проектирование (1-2 недели)**

**Цель:** Заложить прочный фундамент, чтобы избежать проблем в будущем. На этом этапе код почти не пишется.

1.  **Выбор и утверждение технологического стека:**
    *   **Обоснование:** Стек подобран для максимальной скорости разработки, поддерживаемости и создания современного, производительного приложения. Мы используем TypeScript на всех уровнях для строгой типизации и уменьшения ошибок.
    *   **Сервер (Backend):** **NestJS** (фреймворк для Node.js на TypeScript).
        *   *Причина:* Обеспечивает жёсткую, модульную структуру, что критически важно для большого проекта. Встроенная поддержка Dependency Injection, типизации и хороших практик.
    *   **Клиент (Frontend):** **React** (библиотека для UI на TypeScript).
        *   *Причина:* Огромная экосистема, производительность, компонентный подход. Легко найти любую библиотеку для графиков, карт и т.д.
    *   **Оболочка десктопа:** **Tauri**.
        *   *Причина:* Легковесный, безопасный и производительный по сравнению с аналогами (Electron).
    *   **Библиотека UI-компонентов:** **Material-UI (MUI)**.
        *   *Причина:* Готовый набор красивых, профессиональных и настраиваемых React-компонентов, реализующих Google Material Design.
    *   **База данных:** **PostgreSQL**.
        *   *Причина:* Мощная, надёжная и бесплатная реляционная СУБД, отлично подходящая для структурированных данных нашего проекта.

2.  **Проектирование базы данных (ERD):**
    *   Нарисуйте Entity-Relationship Diagram (диаграмму "сущность-связь").
    *   **Ключевые таблицы:** `Users`, `Roles`, `Clients`, `Requests`, `Shipments`, `Vehicles`, `Drivers`, `Documents`, `Tariffs`, `ShipmentStatuses`, `LtlShipments` (для связи заявок в сборном грузе).
    *   Продумайте связи (один-ко-многим, многие-ко-многим). Уделите особое внимание связи заявок и сборных рейсов.

3.  **Проектирование API (RESTful):**
    *   Опишите основные эндпоинты, которые понадобятся клиенту. Например:
        *   `POST /auth/login` — аутентификация.
        *   `GET /requests` — получение списка заявок.
        *   `POST /requests` — создание новой заявки.
        *   `GET /shipments/{id}` — получение информации о перевозке.
        *   `PUT /shipments/{id}/status` — изменение статуса.
    *   Используйте инструменты вроде Swagger/OpenAPI для документирования. Это можно сделать позже, но продумать эндпоинты лучше сейчас.

4.  **Настройка окружения:**
    *   Создайте репозиторий в Git.
    *   Настройте структуру проектов для сервера и клиента.
    *   Установите необходимые библиотеки и зависимости.

---

### **Фаза 1: Ядро системы — MVP (3-4 недели)**

**Цель:** Создать работающий сквозной процесс: от создания заявки до её появления у логиста. Без карт, GPS и сложной логики.

1.  **Бэкенд:**
    *   Реализуйте систему регистрации, аутентификации (JWT-токены) и ролевую модель (Admin, Logistician, Client).
    *   Реализуйте базовый CRUD (Create, Read, Update, Delete) для Заявок (`Requests`).
    *   Реализуйте логику преобразования Заявки в Перевозку (`Shipment`) с назначением водителя и транспорта.
    *   Реализуйте простое изменение статусов перевозки.

2.  **Десктоп-клиент:**
    *   Сделайте окно входа, которое получает токен от сервера.
    *   Создайте главное окно с навигацией.
    *   **Для роли "Клиент":**
        *   Форма создания новой заявки.
        *   Таблица с просмотром **своих** заявок и их статусов.
    *   **Для роли "Логист":**
        *   Таблица с просмотром **всех** новых заявок.
        *   Форма обработки заявки, где можно назначить транспорт/водителя и изменить статус.

**Совет:** На этом этапе главная задача — заставить клиент и сервер общаться. Данные могут быть упрощены. Цель — иметь что-то рабочее, что можно показать.

---

### **Фаза 2: Расширение функционала и интеграции (3-4 недели)**

**Цель:** Добавить ключевые "фишки", которые делают проект мощным.

1.  **Бэкенд:**
    *   Разработайте модуль тарификации (CRUD для тарифов).
    *   Встройте логику авторасчёта предварительной стоимости в процесс создания заявки.
    *   Интегрируйте API картографического сервиса (например, для расчёта расстояния по координатам).
    *   Создайте **симулятор GPS-трекера**: эндпоинт, который будет отдавать "текущие" координаты машины, имитируя её движение по маршруту.

2.  **Десктоп-клиент:**
    *   В форме создания заявки отобразите поле с предварительной стоимостью.
    *   В окне логиста добавьте виджет карты. Используйте для этого встроенный браузерный компонент (WebView), в котором можно отображать JS-карты (Яндекс.Карты, Leaflet).
    *   Отобразите на карте построенный маршрут.
    *   В окне просмотра перевозки (у клиента и логиста) добавьте карту, где будет анимированная метка транспорта, периодически запрашивающая координаты с бэкенда.

**Совет:** Не покупайте реальный GPS-трекер. Сделать симулятор на сервере, который просто отдает точки из заранее рассчитанного маршрута с некоторой задержкой, будет более чем достаточно для демонстрации.

---

### **Фаза 3: Аналитика, LTL и документооборот (2-3 недели)**

**Цель:** Реализовать сложную бизнес-логику и функции для анализа.

1.  **Бэкенд:**
    *   Реализуйте логику для сборных грузов (LTL): создание "рейса", привязка к нему нескольких заявок.
    *   Реализуйте эндпоинт для загрузки файлов (скана POD). Привяжите его к конкретной перевозке.
    *   Создайте логику для расчёта KPI (например, раз в день скрипт может проходиться по доставленным за сутки перевозкам и считать % вовремя доставленных).
    *   Создайте эндпоинты для дашборда, отдающие готовую статистику.

2.  **Десктоп-клиент:**
    *   Доработайте интерфейс для управления сборными рейсами.
    *   Реализуйте для логиста возможность загрузить скан POD. У клиента должна быть возможность его просмотреть/скачать.
    *   Создайте отдельный экран "Аналитика" или "Дашборд". Используйте библиотеку для построения графиков (например, Matplotlib для Python, LiveCharts2 для WPF), чтобы визуализировать KPI.
    *   Проведите "шлифовку" UI: улучшите внешний вид, добавьте иконки, подсказки, обработку ошибок.

---

### **Фаза 4: Документация и подготовка к защите (1-2 недели)**

**Цель:** Упаковать результат и подготовиться к успешной защите.

1.  **Написание сопроводительной документации:**
    *   Руководство пользователя (как клиенту создать заявку, как логисту её обработать).
    *   Руководство администратора (как управлять пользователями и тарифами).
    *   Техническая документация (описание архитектуры, структуры БД, API).

2.  **Подготовка демонстрации:**
    *   Напишите чёткий сценарий показа. Например: "Вот я логинюсь как клиент, создаю заявку. Теперь я логинюсь как логист, вижу эту заявку, обрабатываю, назначаю транспорт. Теперь снова у клиента — статус изменился. Мы видим, как машина едет по карте...".
    *   Заранее подготовьте тестовые данные.
    *   Запишите видео демонстрации на случай технических неполадок в день защиты.
    *   Подготовьте презентацию (PowerPoint/Google Slides).

### **Общие советы на протяжении всего проекта:**

*   **Git:** Делайте коммиты часто. `git commit -m "feat: add request creation form"`. Используйте ветки для каждой новой функции.
*   **Качество кода:** Старайтесь писать чисто. Давайте переменным и функциям осмысленные имена.
*   **Безопасность:** Никогда не храните пароли в открытом виде (используйте хэширование). Не "зашивайте" API-ключи и пароли от БД прямо в код (используйте переменные окружения).
*   **Не застревайте:** Если какая-то функция кажется слишком сложной, упростите её. Лучше иметь работающую, но простую систему, чем наполовину сделанную сложную. Успех — в завершённости.
